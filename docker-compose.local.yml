version: '3'
services:
  xiaozhi-esp32-server:
    image: ghcr.nju.edu.cn/xinnan-tech/xiaozhi-esp32-server:server_latest
    container_name: xiaozhi-esp32-server
    restart: always
    security_opt:
      - seccomp:unconfined
    environment:
      - TZ=Asia/Shanghai
    ports:
      - "8000:8000"  # ws service
      - "8003:8003"  # http service for OTA and vision
    volumes:
      # Configuration directory - use absolute paths
      - ${PWD}/data:/opt/xiaozhi-esp32-server/data
      # Model directory
      - ${PWD}/models/SenseVoiceSmall:/opt/xiaozhi-esp32-server/models/SenseVoiceSmall
      # Logs directory
      - ${PWD}/logs:/opt/xiaozhi-esp32-server/logs
